# flowsort-balanced-wave (Сортировка треков Spotify)

DJ-friendly tempo & key sorting tracks for Goofy / Spotify.

Этот скрипт реализует FlowSort.sortBalancedWave — сортировку треков с учётом темпа, тональностей (Camelot)
и базовых DJ-сценариев плавного развития в режиме (USE_KEY_SCENARIOS = true)

В режиме USE_KEY_SCENARIOS = false используется классическая гармоническая сортировка по Camelot с приоритетом темпа и без сценарных цепочек. Переключение режимов выполняется простым изменением значения флага USE_KEY_SCENARIOS вверху в коде (true ↔️ false)

Подходит для больших плейлистов (до 4000 треков) и
используется в экосистеме Goofy / Google Apps Script для работы со Spotify.

Для работы скрипта требуется настроенный Goofy https://chimildic.github.io/goofy/#/ (к слову огромная благодарность автору проекта Goofy, без него ничего этого не было бы)

Содержимое flowsort_sortBalancedWave.js нужно скопировать, сохранить в отдельный файл и передвинуть его повыше, следующим сразу после library.gs 

Вызывать функцию в скриптах нужно непосредственно перед формированием финального плейлиста (по принципу переменная  "tracks = FlowSort.sortBalancedWave(tracks);" 

По умолчанию сортировка работает в режиме (USE_KEY_SCENARIOS = true)

Отсортированный плейлист рекомендую слушать с включенным crossfade = 10s ,в настройках Playback Spotify , либо использовать функцию Spotify - Mix (в зависимости от разножанровости плейлиста)
